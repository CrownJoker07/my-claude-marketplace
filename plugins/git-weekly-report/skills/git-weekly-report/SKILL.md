---
name: git-weekly-report
description: 自动生成Git仓库的周报，按提交人分类总结工作内容。使用场景：在仓库目录下运行，获取本周（或指定时间段）所有提交人的提交记录，生成包含提交统计、代码变更、AI智能总结的Markdown格式周报。适用于团队协作、项目汇报、代码审查等场景。
---

# Git 周报助手

自动生成Git仓库的周报，按提交人分类总结工作内容。

## 功能概述

- 自动计算本周时间范围（周一到周日），支持自定义时间段
- 统计所有提交人的提交记录，按人分组
- 自动分类提交类型（feat/fix/docs/refactor/art等）
- 统计代码变更量（新增/删除行数、修改文件数）
- **基于实际提交内容生成工作描述**（禁止模板化计数）
- 生成Markdown格式的周报文档

## 使用方法

### 基本用法

在Git仓库目录下运行技能：

```
/git-weekly-report
```

这将自动生成本周（周一到周日）的周报，输出为 `weekly-report.md`。

### 生成本周周报

```
/git-weekly-report --this-week
```

### 生成上周周报

```
/git-weekly-report --last-week
```

### 自定义时间范围

```
/git-weekly-report --since 2024-01-01 --until 2024-01-07
```

### 指定输出文件

```
/git-weekly-report --output my-report.md
```

### 显示详细输出

```
/git-weekly-report --verbose
```

## 工作流程

1. **确定时间范围**：根据参数计算日期范围（本周、上周或自定义）
2. **收集提交数据**：调用脚本收集指定时间范围内的Git提交记录
3. **按作者分组**：将提交按作者分组，统计每个人的提交数量和代码变更
4. **分析工作内容**：基于实际提交信息生成有意义的工作描述
5. **生成Markdown报告**：输出格式化的周报文档

## 脚本使用说明

插件内部使用Python脚本处理数据：

```bash
# 生成本周周报
python -m skills.git-weekly-report.scripts.cli

# 生成上周周报
python -m skills.git-weekly-report.scripts.cli --last-week

# 自定义时间范围
python -m skills.git-weekly-report.scripts.cli --since 2024-01-01 --until 2024-01-07

# 同时输出JSON数据
python -m skills.git-weekly-report.scripts.cli --json-output data.json
```

## 报告格式

生成的Markdown报告包含以下部分：

1. **总体统计**
   - 时间范围
   - 总提交数
   - 活跃贡献者数量
   - 代码变更统计（新增/删除行数）

2. **团队工作摘要**
   - 按提交数量排序的贡献者列表
   - 每个人的主要工作类型分布

3. **个人详细报告**（每个提交人）
   - **工作概览**（基于内容的智能总结）
   - 提交统计（提交数、文件变更、代码变更）
   - 提交类型分布
   - 提交详情表格

## 支持的提交类型

自动识别以下类型的提交：

| 类型 | 说明 |
|------|------|
| feat | 新功能 |
| fix | 问题修复 |
| docs | 文档更新 |
| refactor | 代码重构 |
| test | 测试相关 |
| chore | 杂项 |
| style | 代码样式 |
| perf | 性能优化 |
| build | 构建相关 |
| ci | CI/CD |
| revert | 回滚 |
| art | 美术资源 |
| other | 其他 |

## 分析质量要求

### 禁止模板化输出

不要输出以下无意义的计数描述：
- ❌ "完成了X个功能"
- ❌ "修复了X个问题"
- ❌ "提交了X次代码"
- ❌ "进行了X次重构"
- ❌ 其他类似的计数总结

### 基于实际内容分析

必须分析提交信息中的具体内容：

**功能开发：**
- ✅ 分析具体开发了什么功能（如"时间限制活动管理系统，支持活动创建、编辑和状态管理"）
- ✅ 说明功能解决了什么问题或提供了什么能力

**问题修复：**
- ✅ 说明修复了什么具体bug（如"修复广告代码加载顺序导致的空指针问题"）
- ✅ 描述修复方式和影响范围

**美术资源：**
- ✅ 提取具体资源名称（如"niko好感度01、02动画优化"）
- ✅ 说明优化内容（如"调整动画节奏，优化关键帧过渡"）

**代码重构：**
- ✅ 说明重构了哪个模块（如"重构了用户认证模块的错误处理逻辑"）
- ✅ 阐述重构目的（如"统一错误码，提高可维护性"）

### 分析质量示例

**示例提交记录：**
```
feat: 时间限制活动管理，支持活动创建、编辑和状态管理
fix: 修复广告代码健壮性问题，处理加载异常情况
art: niko好感度01、02动画优化，调整动画节奏和关键帧
```

**❌ 差的分析（禁止）：**
> 完成了3个功能，修复了1个问题，优化了2个动画资源。

**✅ 好的分析（推荐）：**
> **功能开发**：开发了时间限制活动管理系统，支持活动的创建、编辑和状态管理功能。
> **问题修复**：修复广告代码的健壮性问题，增加了加载异常的处理逻辑，提升广告模块稳定性。
> **资源优化**：优化niko好感度01、02的动画表现，调整动画节奏和关键帧过渡，提升视觉效果。

### 作者名处理

**重要**：保持作者名原样输出
- 使用Git输出的 `%an` (author name) 字段
- 禁止翻译、转换或修改作者名
- 不要对中文名、英文名、昵称等进行任何处理
- 示例：`ZeweiZhuang` 保持为 `ZeweiZhuang`，不要翻译成"艺术家"

## 使用建议

1. **定期生成**：建议每周一早上生成本周周报，用于周会汇报
2. **项目里程碑**：在重要节点生成周报，记录项目进展
3. **代码审查**：通过周报了解团队成员的工作重点和代码量
