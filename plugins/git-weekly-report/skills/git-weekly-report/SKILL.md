---
name: git-weekly-report
description: 自动生成Git仓库的周报，按提交人分类总结工作内容。使用场景：在仓库目录下运行，获取本周（或指定时间段）所有提交人的提交记录，生成包含提交统计、代码变更、AI智能总结的Markdown格式周报。适用于团队协作、项目汇报、代码审查等场景。
---

# Git 周报助手

自动生成Git仓库的周报，按提交人分类总结工作内容。

## 功能概述

- 自动计算本周时间范围（周一到周日），支持自定义时间段
- 统计所有提交人的提交记录，按人分组
- 自动分类提交类型（feat/fix/docs/refactor等）
- 统计代码变更量（新增/删除行数、修改文件数）
- 生成Markdown格式的周报文档

## 使用方法

### 基本用法

在Git仓库目录下运行技能：

```
/git-weekly-report
```

这将自动生成本周（周一到周日）的周报。

### 自定义时间范围

```
/git-weekly-report --since 2024-01-01 --until 2024-01-07
```

### 指定输出文件

```
/git-weekly-report --output my-report.md
```

## 工作流程

1. **确定时间范围**：计算本周一时间范围（周一到周日），或解析用户指定的时间
2. **获取提交数据**：使用 Bash 工具执行 `git log` 命令获取指定时间范围内的提交记录
3. **解析提交记录**：按提交人分组，统计每个人的提交数量、代码变更等
4. **分析工作内容**：AI 分析每个提交人的提交信息，智能总结工作内容
5. **生成Markdown报告**：输出格式化的周报文档

## Git 命令格式

使用以下命令获取提交数据：

```bash
git log --since="YYYY-MM-DD 00:00:00" --until="YYYY-MM-DD 23:59:59" --pretty=format:"%H|%an|%ad|%s" --date=short --numstat
```

或获取简略格式：

```bash
git log --since="YYYY-MM-DD 00:00:00" --until="YYYY-MM-DD 23:59:59" --pretty=format:"[%h] %an %ad: %s" --date=short
```

获取提交统计信息：

```bash
git log --since="YYYY-MM-DD 00:00:00" --until="YYYY-MM-DD 23:59:59" --pretty=format:"%H" | xargs -I {} git show --stat --format="" {}
```

## 报告格式

生成的Markdown报告包含以下部分：

1. **总体统计**
   - 时间范围
   - 总提交数
   - 活跃贡献者数量
   - 代码变更统计（新增/删除行数）

2. **团队工作摘要**
   - 按提交数量排序的贡献者列表
   - 每个人的主要工作类型分布

3. **个人详细报告**（每个提交人）
   - 工作概览（AI智能总结）
   - 提交统计（提交数、文件变更、代码变更）
   - 提交类型分布
   - 提交详情表格

## 支持的提交类型

自动识别以下类型的提交：

| 类型 | 说明 |
|------|------|
| feat | 新功能 |
| fix | 问题修复 |
| docs | 文档更新 |
| refactor | 代码重构 |
| test | 测试相关 |
| chore | 杂项 |
| style | 代码样式 |
| perf | 性能优化 |
| build | 构建相关 |
| ci | CI/CD |
| revert | 回滚 |
| other | 其他 |

## 分析指南

在分析提交记录时：

1. **提取提交信息**：从git log输出中解析提交hash、作者、日期、提交信息
2. **识别提交类型**：根据提交信息前缀（feat/fix/docs等）分类
3. **统计代码变更**：分析 `--numstat` 或 `--stat` 输出，统计文件变更数、新增/删除行数
4. **生成工作概览**：
   - 汇总每个提交人的所有提交信息
   - 识别主要工作方向（功能开发/问题修复/文档更新等）
   - 用简洁的语言总结工作成果

## 使用建议

1. **定期生成**：建议每周一早上生成本周周报，用于周会汇报
2. **项目里程碑**：在重要节点生成周报，记录项目进展
3. **代码审查**：通过周报了解团队成员的工作重点和代码量
